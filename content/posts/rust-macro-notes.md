+++
title="更注重实战的 Rust 宏笔记"
date=2024-10-27
draft=true
+++

拜 C++ 一些大型项目编写时的奇怪约定所赐，想必很多从 C++ 转过来写 Rust 的老同志都是闻“宏”色变的。相比较于 Rust 的宏，C++ 的宏更像是一个“一键查找替换”的工具，一路编译下来不会也没有办法检查宏替换前后得到的代码是否合法。

相比较于 C++ 的宏，Rust 的宏就定位上更像是一个“编译器插件”，因为它解析的不是纯粹的文本，而是受 rustc 处理过的抽象语法树（AST），这种设计可以规避掉很多 C++ 宏的问题。

不过，既然都是“编译器插件”了，想必编写 Rust 宏的难度也是有十分甚至九分的困难，光对着[宏小册](https://zjp-cn.github.io/tlborm/)干瞪眼也不是个事儿。所以，我就根据最近的一些实战经验，写一篇更注重实战的 Rust 宏笔记，希望能够帮助到一些有需要的同志。

## 序言：C++ 的宏为什么如此恐怖

## 1. 为什么 Rust 也在用宏

## 2. 实战：解析 `serde-json` 的声明宏 `json!`

## 3. 实战：解析 `yuuka` 的过程宏 `derive_struct!`

## 4. 实战：解析 `yew` 的过程宏 `html!`
